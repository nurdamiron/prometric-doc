# üì¶ Products Module - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±–∑–æ—Ä –º–æ–¥—É–ª—è](#–æ–±–∑–æ—Ä-–º–æ–¥—É–ª—è)
2. [Entity —Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#entity-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
3. [–¢–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤](#—Ç–∏–ø—ã-–ø—Ä–æ–¥—É–∫—Ç–æ–≤)
4. [API Endpoints](#api-endpoints)
5. [DTO —Å—Ç—Ä—É–∫—Ç—É—Ä—ã](#dto-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
6. [–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞](#–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
7. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
8. [–í–∞–ª–∏–¥–∞—Ü–∏—è](#–≤–∞–ª–∏–¥–∞—Ü–∏—è)
9. [–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ](#–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
10. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

## üéØ –û–±–∑–æ—Ä –º–æ–¥—É–ª—è

Products Module - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏, –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ –∏ —É—Å–ª—É–≥–∞–º–∏ –≤ —Å–∏—Å—Ç–µ–º–µ Prometric ERP. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–æ–π –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (—Ç–æ–≤–∞—Ä—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —É—Å–ª—É–≥–∏, –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ –∏–∑–¥–µ–ª–∏—è)
- ‚úÖ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥—Å–∫–∏–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
- ‚úÖ –ù–î–° –∏ –Ω–∞–ª–æ–≥–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã (12% —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º –∏ –∑–∞–∫—É–ø–∫–∞–º–∏
- ‚úÖ Bulk –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞
- ‚úÖ Wizard –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üóÑÔ∏è Entity —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Product Entity (`src/products/entities/product.entity.ts`)

```typescript
@Entity('products')
@Index(['organizationId', 'workspaceId'])
@Index(['code', 'organizationId'], { unique: true })
@Index(['status'])
@Index(['productType'])
@Index(['categoryId'])
export class Product {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column()
  name: string; // –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞

  @Column({ unique: true })
  code: string; // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥/–∞—Ä—Ç–∏–∫—É–ª

  @Column({ type: 'text', nullable: true })
  description: string; // –û–ø–∏—Å–∞–Ω–∏–µ

  @Column({ default: '—à—Ç' })
  unit: string; // –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è

  @Column({ type: 'decimal', precision: 15, scale: 2, default: 0 })
  price: number; // –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏

  @Column({ type: 'decimal', precision: 15, scale: 2, default: 0 })
  cost: number; // –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å

  @Column({ type: 'enum', enum: ProductType, default: ProductType.PRODUCT })
  productType: ProductType;

  @Column({ type: 'enum', enum: ProductStatus, default: ProductStatus.ACTIVE })
  status: ProductStatus;

  // –ù–î–° –∏ –Ω–∞–ª–æ–≥–∏
  @Column({ type: 'decimal', precision: 5, scale: 2, default: 12 })
  vatRate: number; // –°—Ç–∞–≤–∫–∞ –ù–î–° (12% —Å—Ç–∞–Ω–¥–∞—Ä—Ç)

  @Column({ default: true })
  vatIncluded: boolean; // –ù–î–° –≤–∫–ª—é—á–µ–Ω –≤ —Ü–µ–Ω—É

  @Column({ default: false })
  vatExempt: boolean; // –û—Å–≤–æ–±–æ–∂–¥–µ–Ω –æ—Ç –ù–î–°

  // –§–∏–∑–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
  @Column({ type: 'decimal', precision: 10, scale: 3, nullable: true })
  weight: number; // –í–µ—Å –≤ –∫–≥

  @Column({ type: 'decimal', precision: 10, scale: 2, nullable: true })
  length: number; // –î–ª–∏–Ω–∞ –≤ —Å–º

  @Column({ type: 'decimal', precision: 10, scale: 2, nullable: true })
  width: number; // –®–∏—Ä–∏–Ω–∞ –≤ —Å–º

  @Column({ type: 'decimal', precision: 10, scale: 2, nullable: true })
  height: number; // –í—ã—Å–æ—Ç–∞ –≤ —Å–º

  // –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏
  @Column({ nullable: true })
  primarySupplierId: string;

  @Column({ nullable: true })
  supplierCode: string; // –ö–æ–¥ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

  @Column({ type: 'decimal', precision: 15, scale: 2, nullable: true })
  purchasePrice: number; // –ó–∞–∫—É–ø–æ—á–Ω–∞—è —Ü–µ–Ω–∞

  @Column({ type: 'int', nullable: true })
  leadTimeDays: number; // –°—Ä–æ–∫ –ø–æ—Å—Ç–∞–≤–∫–∏ –≤ –¥–Ω—è—Ö

  @Column({ type: 'decimal', precision: 15, scale: 3, nullable: true })
  minOrderQuantity: number; // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑

  // –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
  @Column({ type: 'decimal', precision: 15, scale: 2, nullable: true })
  materialCost: number; // –°—Ç–æ–∏–º–æ—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

  @Column({ type: 'decimal', precision: 15, scale: 2, nullable: true })
  laborCost: number; // –°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

  @Column({ type: 'decimal', precision: 5, scale: 2, default: 20 })
  overheadPercent: number; // –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã %

  @Column({ type: 'decimal', precision: 5, scale: 2, default: 30 })
  marginPercent: number; // –ù–∞—Ü–µ–Ω–∫–∞ %

  // –°–∫–ª–∞–¥—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  @Column({ type: 'decimal', precision: 15, scale: 3, nullable: true })
  minStockLevel: number; // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫

  @Column({ type: 'decimal', precision: 15, scale: 3, nullable: true })
  maxStockLevel: number; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫

  @Column({ type: 'int', nullable: true })
  expiryDays: number; // –°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ –≤ –¥–Ω—è—Ö

  @Column({ default: false })
  batchTracking: boolean; // –ü–∞—Ä—Ç–∏–æ–Ω–Ω—ã–π —É—á–µ—Ç

  // –°–≤—è–∑–∏
  @ManyToOne(() => Category, { nullable: true })
  @JoinColumn({ name: 'categoryId' })
  category: Category;

  @Column({ nullable: true })
  categoryId: string;

  @ManyToOne(() => Organization)
  @JoinColumn({ name: 'organizationId' })
  organization: Organization;

  @Column()
  organizationId: string;

  @ManyToOne(() => Workspace)
  @JoinColumn({ name: 'workspaceId' })
  workspace: Workspace;

  @Column()
  workspaceId: string;

  // Timestamps
  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  @Column({ nullable: true })
  createdBy: string;

  @Column({ nullable: true })
  updatedBy: string;
}
```

## üé® –¢–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### ProductType Enum

```typescript
export enum ProductType {
  PRODUCT = 'PRODUCT',           // –û–±—ã—á–Ω—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∏
  MATERIAL = 'MATERIAL',         // –°—ã—Ä—å–µ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
  SERVICE = 'SERVICE',           // –£—Å–ª—É–≥–∏
  DIGITAL = 'DIGITAL',          // –¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã
  BUNDLE = 'BUNDLE',            // –ù–∞–±–æ—Ä—ã/–∫–æ–º–ø–ª–µ–∫—Ç—ã
  MANUFACTURED = 'MANUFACTURED'  // –ü—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ –∏–∑–¥–µ–ª–∏—è
}
```

### ProductStatus Enum

```typescript
export enum ProductStatus {
  ACTIVE = 'ACTIVE',           // –ê–∫—Ç–∏–≤–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∂
  INACTIVE = 'INACTIVE',       // –í—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
  DRAFT = 'DRAFT',            // –ß–µ—Ä–Ω–æ–≤–∏–∫
  DISCONTINUED = 'DISCONTINUED' // –°–Ω—è—Ç —Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
}
```

### –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º:

#### üõçÔ∏è PRODUCT (–¢–æ–≤–∞—Ä—ã –¥–ª—è –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∏)
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** name, code, unit, price, purchasePrice
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –¢–æ–≤–∞—Ä—ã, –∑–∞–∫—É–ø–∞–µ–º—ã–µ —É –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–ª—è –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** –ó–∞–∫—É–ø–∫–∏, –°–∫–ª–∞–¥, –ü—Ä–æ–¥–∞–∂–∏

#### üè≠ MATERIAL (–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Å—ã—Ä—å–µ)
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** name, code, unit, price, weight –∏–ª–∏ dimensions
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –°—ã—Ä—å–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ, BOM (Bill of Materials), –ó–∞–∫—É–ø–∫–∏

#### üõ†Ô∏è SERVICE (–£—Å–ª—É–≥–∏)
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** name, code, unit, price
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –£—Å–ª—É–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ù–µ —Ç—Ä–µ–±—É—é—Ç —Å–∫–ª–∞–¥—Å–∫–æ–≥–æ —É—á–µ—Ç–∞

#### üèóÔ∏è MANUFACTURED (–ü—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ –∏–∑–¥–µ–ª–∏—è)
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** materialCost, laborCost
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –¢–æ–≤–∞—Ä—ã —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
- **–†–∞—Å—á–µ—Ç—ã:** 
  - `totalCost = materialCost + laborCost + (materialCost + laborCost) * overheadPercent / 100`
  - `price = totalCost * (1 + marginPercent / 100)`
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** Production Orders, BOM, Work Orders

#### üì¶ BUNDLE (–ù–∞–±–æ—Ä—ã)
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** description, price
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ö–æ–º–ø–ª–µ–∫—Ç—ã –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –°–≤—è–∑—å —Å BundleItems

#### üíæ DIGITAL (–¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã)
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** price, description
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –õ–∏—Ü–µ–Ω–∑–∏–∏, –ø–æ–¥–ø–∏—Å–∫–∏, —Ü–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ù–µ —Ç—Ä–µ–±—É—é—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–ª–∞–¥–∞

## üì° API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏

#### GET /workspaces/:workspaceId/products
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/–∫–æ–¥—É
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `productType` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É
- `categoryId` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `minPrice` / `maxPrice` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ
- `page` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (default: 1)
- `limit` - —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (default: 20)
- `sortBy` - –ø–æ–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `sortOrder` - ASC/DESC

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "name": "–ü—Ä–æ–¥—É–∫—Ç 1",
      "code": "PRD001",
      "price": 15000,
      "cost": 10000,
      "status": "ACTIVE",
      "productType": "PRODUCT",
      "vatRate": 12,
      "vatIncluded": true,
      "category": {
        "id": "uuid",
        "name": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è"
      }
    }
  ],
  "meta": {
    "total": 100,
    "page": 1,
    "limit": 20,
    "totalPages": 5
  }
}
```

#### GET /workspaces/:workspaceId/products/:id
–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–µ

#### POST /workspaces/:workspaceId/products
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç

**Request Body:**
```json
{
  "name": "–ù–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç",
  "code": "NEW001",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞",
  "unit": "—à—Ç",
  "price": 25000,
  "cost": 15000,
  "productType": "PRODUCT",
  "status": "ACTIVE",
  "vatRate": 12,
  "vatIncluded": true,
  "categoryId": "uuid",
  "minStockLevel": 10,
  "maxStockLevel": 100
}
```

#### PUT /workspaces/:workspaceId/products/:id
–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç

#### DELETE /workspaces/:workspaceId/products/:id
–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç (soft delete)

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ endpoints

#### POST /workspaces/:workspaceId/products/bulk
–ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

**Request Body:**
```json
{
  "products": [
    { /* product data */ },
    { /* product data */ }
  ],
  "skipValidation": false
}
```

#### DELETE /workspaces/:workspaceId/products/bulk
–ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

**Request Body:**
```json
{
  "productIds": ["uuid1", "uuid2", "uuid3"]
}
```

#### POST /workspaces/:workspaceId/products/import
–ò–º–ø–æ—Ä—Ç –∏–∑ Excel/CSV —Ñ–∞–π–ª–∞

**Form Data:**
- `file` - —Ñ–∞–π–ª Excel/CSV
- `updateExisting` - –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ (boolean)
- `skipErrors` - –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏ (boolean)

#### GET /workspaces/:workspaceId/products/export
–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–∫ –≤ GET /products
- `format` - excel/csv

### Product Wizard

#### POST /workspaces/:workspaceId/products/wizard
–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ —á–µ—Ä–µ–∑ –≤–∏–∑–∞—Ä–¥

**Request Body:**
```json
{
  "step": "basic",
  "data": {
    "productType": "MANUFACTURED",
    "name": "–ò–∑–¥–µ–ª–∏–µ",
    "code": "MAN001",
    "baseInfo": { /* ... */ },
    "pricing": { /* ... */ },
    "inventory": { /* ... */ },
    "manufacturing": {
      "bomItems": [
        {
          "materialId": "uuid",
          "quantity": 2,
          "unit": "—à—Ç"
        }
      ],
      "operations": [
        {
          "name": "–°–±–æ—Ä–∫–∞",
          "duration": 120,
          "cost": 5000
        }
      ]
    }
  }
}
```

### Categories

#### GET /workspaces/:workspaceId/products/categories
–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### POST /workspaces/:workspaceId/products/categories
–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é

#### PUT /workspaces/:workspaceId/products/categories/:id
–û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é

#### DELETE /workspaces/:workspaceId/products/categories/:id
–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é

### Inventory

#### GET /workspaces/:workspaceId/products/:id/inventory
–ü–æ–ª—É—á–∏—Ç—å —Å–∫–ª–∞–¥—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∞

#### POST /workspaces/:workspaceId/products/:id/inventory/adjust
–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤

**Request Body:**
```json
{
  "warehouseId": "uuid",
  "adjustment": 10,
  "reason": "–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è",
  "notes": "–ü—Ä–∏–º–µ—á–∞–Ω–∏—è"
}
```

## üìù DTO —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### CreateProductDto

```typescript
export class CreateProductDto {
  @IsString()
  @IsNotEmpty()
  name: string;

  @IsString()
  @IsNotEmpty()
  code: string;

  @IsString()
  @IsOptional()
  description?: string;

  @IsString()
  @IsOptional()
  unit?: string = '—à—Ç';

  @IsNumber()
  @IsOptional()
  price?: number;

  @IsNumber()
  @IsOptional()
  cost?: number;

  @IsEnum(ProductType)
  @IsOptional()
  productType?: ProductType = ProductType.PRODUCT;

  @IsEnum(ProductStatus)
  @IsOptional()
  status?: ProductStatus = ProductStatus.ACTIVE;

  @IsNumber()
  @IsOptional()
  vatRate?: number = 12;

  @IsBoolean()
  @IsOptional()
  vatIncluded?: boolean = true;

  @IsBoolean()
  @IsOptional()
  vatExempt?: boolean = false;

  @IsString()
  @IsOptional()
  categoryId?: string;

  // –§–∏–∑–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
  @IsNumber()
  @IsOptional()
  weight?: number;

  @IsNumber()
  @IsOptional()
  length?: number;

  @IsNumber()
  @IsOptional()
  width?: number;

  @IsNumber()
  @IsOptional()
  height?: number;

  // –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏
  @IsString()
  @IsOptional()
  primarySupplierId?: string;

  @IsString()
  @IsOptional()
  supplierCode?: string;

  @IsNumber()
  @IsOptional()
  purchasePrice?: number;

  @IsNumber()
  @IsOptional()
  leadTimeDays?: number;

  @IsNumber()
  @IsOptional()
  minOrderQuantity?: number;

  // –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
  @IsNumber()
  @IsOptional()
  materialCost?: number;

  @IsNumber()
  @IsOptional()
  laborCost?: number;

  @IsNumber()
  @IsOptional()
  overheadPercent?: number = 20;

  @IsNumber()
  @IsOptional()
  marginPercent?: number = 30;

  // –°–∫–ª–∞–¥
  @IsNumber()
  @IsOptional()
  minStockLevel?: number;

  @IsNumber()
  @IsOptional()
  maxStockLevel?: number;

  @IsNumber()
  @IsOptional()
  expiryDays?: number;

  @IsBoolean()
  @IsOptional()
  batchTracking?: boolean = false;
}
```

### UpdateProductDto

```typescript
export class UpdateProductDto extends PartialType(CreateProductDto) {}
```

### BulkCreateProductsDto

```typescript
export class BulkCreateProductsDto {
  @IsArray()
  @ValidateNested({ each: true })
  @Type(() => CreateProductDto)
  products: CreateProductDto[];

  @IsBoolean()
  @IsOptional()
  skipValidation?: boolean = false;
}
```

### ProductWizardDto

```typescript
export class ProductWizardDto {
  @IsEnum(['basic', 'pricing', 'inventory', 'manufacturing', 'complete'])
  step: string;

  @IsObject()
  data: {
    productType?: ProductType;
    baseInfo?: {
      name: string;
      code: string;
      description?: string;
      categoryId?: string;
    };
    pricing?: {
      price: number;
      cost?: number;
      vatRate?: number;
      vatIncluded?: boolean;
    };
    inventory?: {
      unit: string;
      minStockLevel?: number;
      maxStockLevel?: number;
      batchTracking?: boolean;
    };
    manufacturing?: {
      bomItems?: Array<{
        materialId: string;
        quantity: number;
        unit: string;
      }>;
      operations?: Array<{
        name: string;
        duration: number;
        cost: number;
      }>;
    };
  };
}
```

## üíº –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –†–∞—Å—á–µ—Ç —Ü–µ–Ω –¥–ª—è MANUFACTURED –ø—Ä–æ–¥—É–∫—Ç–æ–≤

```typescript
calculateManufacturedPrice(product: Product): number {
  const baseCost = product.materialCost + product.laborCost;
  const overheadCost = baseCost * (product.overheadPercent / 100);
  const totalCost = baseCost + overheadCost;
  const price = totalCost * (1 + product.marginPercent / 100);
  
  // –£—á–µ—Ç –ù–î–°
  if (!product.vatIncluded && !product.vatExempt) {
    return price * (1 + product.vatRate / 100);
  }
  
  return price;
}
```

### –†–∞—Å—á–µ—Ç –ù–î–°

```typescript
calculateVAT(product: Product): {
  priceWithoutVAT: number;
  vatAmount: number;
  priceWithVAT: number;
} {
  if (product.vatExempt) {
    return {
      priceWithoutVAT: product.price,
      vatAmount: 0,
      priceWithVAT: product.price
    };
  }

  const vatRate = product.vatRate / 100;
  
  if (product.vatIncluded) {
    const priceWithoutVAT = product.price / (1 + vatRate);
    const vatAmount = product.price - priceWithoutVAT;
    return {
      priceWithoutVAT,
      vatAmount,
      priceWithVAT: product.price
    };
  } else {
    const vatAmount = product.price * vatRate;
    return {
      priceWithoutVAT: product.price,
      vatAmount,
      priceWithVAT: product.price + vatAmount
    };
  }
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤

```typescript
@ValidatorConstraint({ async: false })
export class ProductTypeValidatorConstraint implements ValidatorConstraintInterface {
  validate(value: any, args: ValidationArguments) {
    const object = args.object as any;
    const productType = object.productType;

    switch (productType) {
      case ProductType.SERVICE:
        // –î–ª—è —É—Å–ª—É–≥ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã: unit, price
        return !!(object.unit && object.price);
        
      case ProductType.MATERIAL:
        // –î–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã: unit, price, weight –∏–ª–∏ dimensions
        return !!(object.unit && object.price && 
          (object.weight || object.length || object.width || object.height));
          
      case ProductType.DIGITAL:
        // –î–ª—è —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã: price, description
        return !!(object.price && object.description);
        
      case ProductType.MANUFACTURED:
        // –î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã: materialCost, laborCost
        return !!(object.materialCost !== undefined && object.laborCost !== undefined);
        
      case ProductType.BUNDLE:
        // –î–ª—è –Ω–∞–±–æ—Ä–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã: description, price
        return !!(object.description && object.price);
        
      default:
        return true;
    }
  }
}
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

#### 1. Deals Module
- –ü—Ä–æ–¥—É–∫—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Å–¥–µ–ª–∫–∏ —á–µ—Ä–µ–∑ `DealProduct` entity
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∫–∏–¥–æ–∫ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏

#### 2. Orders Module
- –ü—Ä–æ–¥—É–∫—Ç—ã –≤ –∑–∞–∫–∞–∑–∞—Ö —á–µ—Ä–µ–∑ `OrderItem` interface
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ
- –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

#### 3. Production Module
- MANUFACTURED –ø—Ä–æ–¥—É–∫—Ç—ã —Å–æ–∑–¥–∞—é—Ç Production Orders
- BOM (Bill of Materials) –¥–ª—è —Å–æ—Å—Ç–∞–≤–∞ –∏–∑–¥–µ–ª–∏–π
- –†–∞—Å—á–µ—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞

#### 4. Procurement Module
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –Ω–∞ –∑–∞–∫—É–ø–∫—É
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ —Ü–µ–Ω
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏

#### 5. Warehouse Module
- –°–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç –ø–æ –º–µ—Å—Ç–∞–º —Ö—Ä–∞–Ω–µ–Ω–∏—è
- –ü–∞—Ä—Ç–∏–æ–Ω–Ω—ã–π —É—á–µ—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏

## üóÉÔ∏è –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### Redis Cache Strategy

```typescript
@Injectable()
export class ProductsService {
  // –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
  @Cacheable({
    key: (args) => `products:list:${args[0]}:${args[1]}:${JSON.stringify(args[2])}`,
    ttl: 300 // 5 –º–∏–Ω—É—Ç
  })
  async findAll(organizationId: string, workspaceId: string, filters: any) {
    // ...
  }

  // –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
  @Cacheable({
    key: (args) => `products:single:${args[0]}`,
    ttl: 600 // 10 –º–∏–Ω—É—Ç
  })
  async findOne(id: string) {
    // ...
  }

  // –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
  @CacheEvict({
    key: (args) => [
      `products:single:${args[0]}`,
      `products:list:*`
    ]
  })
  async update(id: string, updateProductDto: UpdateProductDto) {
    // ...
  }
}
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞

```typescript
// POST /workspaces/:workspaceId/products
{
  "name": "–ù–æ—É—Ç–±—É–∫ Dell Latitude 5520",
  "code": "DELL-5520",
  "description": "–ë–∏–∑–Ω–µ—Å-–Ω–æ—É—Ç–±—É–∫ —Å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º Intel i7",
  "unit": "—à—Ç",
  "price": 450000,
  "cost": 380000,
  "productType": "PRODUCT",
  "status": "ACTIVE",
  "vatRate": 12,
  "vatIncluded": true,
  "categoryId": "electronics-category-id",
  "weight": 2.5,
  "primarySupplierId": "dell-supplier-id",
  "purchasePrice": 380000,
  "leadTimeDays": 14,
  "minOrderQuantity": 1,
  "minStockLevel": 5,
  "maxStockLevel": 20
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏

```typescript
// POST /workspaces/:workspaceId/products
{
  "name": "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é ERP",
  "code": "SERV-CONSULT-001",
  "description": "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é ERP —Å–∏—Å—Ç–µ–º—ã",
  "unit": "—á–∞—Å",
  "price": 50000,
  "productType": "SERVICE",
  "status": "ACTIVE",
  "vatRate": 12,
  "vatIncluded": true,
  "categoryId": "services-category-id"
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–≥–æ –∏–∑–¥–µ–ª–∏—è

```typescript
// POST /workspaces/:workspaceId/products/wizard
{
  "step": "complete",
  "data": {
    "productType": "MANUFACTURED",
    "baseInfo": {
      "name": "–°—Ç–æ–ª –æ—Ñ–∏—Å–Ω—ã–π",
      "code": "FURN-DESK-001",
      "description": "–û—Ñ–∏—Å–Ω—ã–π —Å—Ç–æ–ª 140x70 —Å–º",
      "categoryId": "furniture-category-id"
    },
    "pricing": {
      "materialCost": 25000,
      "laborCost": 15000,
      "overheadPercent": 20,
      "marginPercent": 40,
      "vatRate": 12,
      "vatIncluded": true
    },
    "inventory": {
      "unit": "—à—Ç",
      "minStockLevel": 2,
      "maxStockLevel": 10
    },
    "manufacturing": {
      "bomItems": [
        {
          "materialId": "wood-material-id",
          "quantity": 2,
          "unit": "–º¬≤"
        },
        {
          "materialId": "screws-material-id",
          "quantity": 20,
          "unit": "—à—Ç"
        }
      ],
      "operations": [
        {
          "name": "–†–∞—Å–ø–∏–ª",
          "duration": 30,
          "cost": 3000
        },
        {
          "name": "–°–±–æ—Ä–∫–∞",
          "duration": 60,
          "cost": 5000
        },
        {
          "name": "–ü–æ–∫—Ä–∞—Å–∫–∞",
          "duration": 120,
          "cost": 7000
        }
      ]
    }
  }
}
```

### –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç –∏–∑ Excel

```typescript
// POST /workspaces/:workspaceId/products/import
// Form-data:
// - file: products.xlsx
// - updateExisting: true
// - skipErrors: false

// Excel —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
// | –ö–æ–¥ | –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ | –¢–∏–ø | –ï–¥.–∏–∑–º | –¶–µ–Ω–∞ | –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å | –ù–î–° % | –ö–∞—Ç–µ–≥–æ—Ä–∏—è |
// | PRD001 | –¢–æ–≤–∞—Ä 1 | PRODUCT | —à—Ç | 10000 | 7000 | 12 | –ö–∞—Ç–µ–≥–æ—Ä–∏—è 1 |
// | MAT001 | –ú–∞—Ç–µ—Ä–∏–∞–ª 1 | MATERIAL | –∫–≥ | 5000 | 3500 | 12 | –ú–∞—Ç–µ—Ä–∏–∞–ª—ã |
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

```typescript
// GET /workspaces/:workspaceId/products?productType=MANUFACTURED&status=ACTIVE&minPrice=10000&maxPrice=100000&page=1&limit=20&sortBy=price&sortOrder=ASC

// Response:
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "name": "–°—Ç–æ–ª –æ—Ñ–∏—Å–Ω—ã–π",
      "code": "FURN-DESK-001",
      "price": 61600, // (25000 + 15000) * 1.2 * 1.4
      "materialCost": 25000,
      "laborCost": 15000,
      "overheadPercent": 20,
      "marginPercent": 40,
      "productType": "MANUFACTURED",
      "status": "ACTIVE",
      "vatRate": 12,
      "vatIncluded": true,
      "category": {
        "id": "furniture-category-id",
        "name": "–ú–µ–±–µ–ª—å"
      },
      "createdAt": "2025-01-15T10:00:00Z",
      "updatedAt": "2025-01-15T10:00:00Z"
    }
  ],
  "meta": {
    "total": 15,
    "page": 1,
    "limit": 20,
    "totalPages": 1,
    "filters": {
      "productType": "MANUFACTURED",
      "status": "ACTIVE",
      "minPrice": 10000,
      "maxPrice": 100000
    }
  }
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –†–æ–ª–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

```typescript
enum ProductPermissions {
  VIEW_PRODUCTS = 'products.view',
  CREATE_PRODUCT = 'products.create',
  UPDATE_PRODUCT = 'products.update',
  DELETE_PRODUCT = 'products.delete',
  IMPORT_PRODUCTS = 'products.import',
  EXPORT_PRODUCTS = 'products.export',
  MANAGE_CATEGORIES = 'products.categories.manage',
  ADJUST_INVENTORY = 'products.inventory.adjust'
}

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ
@UseGuards(JwtAuthGuard, WorkspaceGuard, PermissionGuard)
@RequirePermissions(ProductPermissions.CREATE_PRODUCT)
@Post()
async create(@Body() createProductDto: CreateProductDto) {
  // ...
}
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–æ —Ç–∏–ø–∞–º
- –¢–æ–ø –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –ü—Ä–æ–¥—É–∫—Ç—ã —Å –Ω–∏–∑–∫–∏–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
- –°—Ä–µ–¥–Ω—è—è –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤
- ABC-–∞–Ω–∞–ª–∏–∑ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã

### Endpoint –¥–ª—è –º–µ—Ç—Ä–∏–∫

```typescript
// GET /workspaces/:workspaceId/products/metrics

{
  "totalProducts": 1250,
  "byType": {
    "PRODUCT": 800,
    "MATERIAL": 200,
    "SERVICE": 100,
    "MANUFACTURED": 150
  },
  "byStatus": {
    "ACTIVE": 1100,
    "INACTIVE": 100,
    "DISCONTINUED": 50
  },
  "lowStock": 25,
  "averageMargin": 35.5,
  "topCategories": [
    {
      "id": "uuid",
      "name": "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
      "count": 300,
      "revenue": 150000000
    }
  ]
}
```

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –°–æ–±—ã—Ç–∏—è –º–æ–¥—É–ª—è

```typescript
// Emitted events
- 'product.created' - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞
- 'product.updated' - –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- 'product.deleted' - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
- 'product.status.changed' - –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- 'product.stock.low' - –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞
- 'product.imported' - –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –∏–º–ø–æ—Ä—Ç–µ

// Listened events
- 'order.created' - –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- 'production.completed' - –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
- 'purchase.received' - –¥–ª—è –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∞

```typescript
// –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
throw new ConflictException('Product with this code already exists');

// –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Å—Ç–∞—Ç–∫–æ–≤
throw new BadRequestException('Insufficient stock for product');

// –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∑–∞–∫–∞–∑–∞–º–∏
throw new BadRequestException('Cannot delete product with active orders');

// –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏
throw new BadRequestException('Operation not allowed for this product type');
```

## üìù –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã** –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º –∏–º–ø–æ—Ä—Ç–æ–º
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–∫—É–ø–æ–∫
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ –∞—Ä—Ö–∏–≤–∏—Ä—É–π—Ç–µ** –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
6. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä—Ç–∏–æ–Ω–Ω—ã–π —É—á–µ—Ç** –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Å—Ä–æ–∫–æ–º –≥–æ–¥–Ω–æ—Å—Ç–∏
7. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ù–î–° –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è

---

¬© 2025 Prometric ERP - Products Module Documentation