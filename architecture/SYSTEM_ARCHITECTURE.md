# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Prometric AI System

## ğŸ—ï¸ ĞĞ±Ñ‰Ğ°Ñ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React)                      â”‚
â”‚                   prometric-platform                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  API Gateway / Nginx                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                          â”‚
           â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Prometric Backend  â”‚    â”‚   Prometric AI Service     â”‚
â”‚     (NestJS)         â”‚â—„â”€â”€â”€â”¤      (Node.js)             â”‚
â”‚   Port: 5001         â”‚    â”‚      Port: 8080            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                              â”‚
           â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL DB      â”‚    â”‚     Vertex AI API          â”‚
â”‚   (AWS RDS)          â”‚    â”‚    (Google Cloud)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§© ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ñ‹

### 1. Frontend (prometric-platform)
- **Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:** React, Next.js, TypeScript
- **ĞŸĞ¾Ñ€Ñ‚:** 3000 (dev), 3001 (prod)
- **ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸:**
  - Dashboard
  - Sales (Deals, Clients, Products)
  - Marketing (Campaigns, Leads)
  - Finance (Invoices, Payments)
  - Production (Orders, Planning)
  - HR (Employees, Performance)
  - AI Assistant Interface

### 2. Backend API (prometric-backend)
- **Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:** NestJS, TypeScript, TypeORM
- **ĞŸĞ¾Ñ€Ñ‚:** 5001
- **Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:** PostgreSQL (AWS RDS)
- **ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸:**
  - Auth Module (JWT)
  - Workspaces Module
  - Organizations Module
  - Users/Employees Module
  - Sales Module
  - Finance Module
  - Production Module
  - Tasks Module
  - Documents Module

### 3. AI Service (prometric-ai-service)
- **Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:** Node.js, Express, JavaScript
- **ĞŸĞ¾Ñ€Ñ‚:** 8080
- **AI Provider:** Google Vertex AI (Gemini)
- **ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:**
  - AI Command Center
  - Intent Detection Engine
  - Entity Extraction Engine
  - Dependency Resolution Engine
  - Execution Orchestrator
  - Backend Integration Handlers
  - Workflow Automation Engine

## ğŸ”„ Request Flow

### Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ñ‚Ğ¾Ğº Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° CREATE_CUSTOMER:

1. **User Input** (Frontend)
   ```
   ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: "ÑĞ¾Ğ·Ğ´Ğ°Ğ¹ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ˜Ğ½Ğ½Ğ¾Ğ²Ğ°Ñ†Ğ¸Ğ¸ ĞšĞ— Ñ email info@innovation.kz"
   ```

2. **Frontend â†’ AI Service**
   ```javascript
   POST http://localhost:8080/api/ai/command
   {
     "input": "ÑĞ¾Ğ·Ğ´Ğ°Ğ¹ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ˜Ğ½Ğ½Ğ¾Ğ²Ğ°Ñ†Ğ¸Ğ¸ ĞšĞ— Ñ email info@innovation.kz",
     "workspaceId": "...",
     "organizationId": "...",
     "userId": "..."
   }
   ```

3. **AI Service Processing**
   - Intent Detection â†’ `CREATE_CUSTOMER`
   - Entity Extraction â†’ `{name: "Ğ˜Ğ½Ğ½Ğ¾Ğ²Ğ°Ñ†Ğ¸Ğ¸ ĞšĞ—", email: "info@innovation.kz"}`
   - Dependency Resolution â†’ Check organization, workspace
   - Execution Planning â†’ Prepare customer data

4. **AI Service â†’ Backend**
   ```javascript
   POST http://localhost:5001/api/v1/workspaces/{id}/customers
   {
     "name": "Ğ˜Ğ½Ğ½Ğ¾Ğ²Ğ°Ñ†Ğ¸Ğ¸ ĞšĞ—",
     "type": "COMPANY",
     "companyName": "Ğ˜Ğ½Ğ½Ğ¾Ğ²Ğ°Ñ†Ğ¸Ğ¸ ĞšĞ—",
     "email": "info@innovation.kz",
     // ...
   }
   ```

5. **Backend Processing**
   - Validate data
   - Check permissions
   - Create DB record
   - Return created entity

6. **Response Chain**
   Backend â†’ AI Service â†’ Frontend â†’ User

## ğŸ—‚ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ°

```
/prometric/
â”œâ”€â”€ prometric-platform/       # Frontend Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # React ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ pages/          # Next.js ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
â”‚   â”‚   â”œâ”€â”€ hooks/          # Custom hooks
â”‚   â”‚   â”œâ”€â”€ lib/            # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ Ğ¸ API ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â””â”€â”€ styles/         # CSS/SCSS ÑÑ‚Ğ¸Ğ»Ğ¸
â”‚   â””â”€â”€ public/             # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
â”‚
â”œâ”€â”€ prometric-backend/       # Backend API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ modules/        # NestJS Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸
â”‚   â”‚   â”œâ”€â”€ entities/       # TypeORM entities
â”‚   â”‚   â”œâ”€â”€ migrations/     # Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”‚   â””â”€â”€ common/         # ĞĞ±Ñ‰Ğ¸Ğµ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â””â”€â”€ test/              # Ğ¢ĞµÑÑ‚Ñ‹
â”‚
â””â”€â”€ prometric-ai-service/   # AI ÑĞµÑ€Ğ²Ğ¸Ñ
    â”œâ”€â”€ core/
    â”‚   â”œâ”€â”€ engines/        # AI Ğ´Ğ²Ğ¸Ğ¶ĞºĞ¸
    â”‚   â”œâ”€â”€ services/       # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
    â”‚   â””â”€â”€ utils/         # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
    â”œâ”€â”€ handlers/          # Backend Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
    â”œâ”€â”€ middleware/        # Express middleware
    â””â”€â”€ routes/           # API Ñ€Ğ¾ÑƒÑ‚Ñ‹
```

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¸ ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
1. **JWT Tokens** - Ğ´Ğ»Ñ Ğ²ÑĞµÑ… API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
2. **Workspace Isolation** - Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾ workspace
3. **Role-Based Access Control (RBAC)**:
   - Owner - Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿
   - Manager - ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¾Ğ¹
   - Employee - Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿

### Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- HTTPS Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹
- Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ sensitive Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- Input sanitization Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ² XSS/SQL injection
- Rate limiting Ğ´Ğ»Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ¾Ñ‚ DDoS

## ğŸ“Š ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ

### ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:
1. **ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**
   - Redis Ğ´Ğ»Ñ ÑĞµÑÑĞ¸Ğ¹ Ğ¸ Ñ‡Ğ°ÑÑ‚Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
   - In-memory cache Ğ´Ğ»Ñ AI intent detection
   - Browser cache Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

2. **Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…**
   - Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ½Ğ° Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑÑ…
   - Connection pooling
   - Query optimization

3. **AI Service**
   - Batch processing Ğ´Ğ»Ñ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
   - Async/await Ğ´Ğ»Ñ Ğ½ĞµĞ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒÑÑ‰Ğ¸Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
   - Rate limiting (10 req/burst, 60 req/min)

## ğŸš€ Deployment

### Production Environment:
- **Frontend:** Railway/Vercel
- **Backend:** Railway
- **Database:** AWS RDS (PostgreSQL)
- **AI Service:** Railway
- **Redis:** Railway Redis addon

### Environment Variables:
```env
# Backend
DATABASE_URL=postgresql://...
JWT_SECRET=...
PORT=5001

# AI Service
BACKEND_URL=http://localhost:5001
GOOGLE_APPLICATION_CREDENTIALS=./vertex-ai-key.json
PORT=8080

# Frontend
NEXT_PUBLIC_API_URL=http://localhost:5001
NEXT_PUBLIC_AI_SERVICE_URL=http://localhost:8080
```

## ğŸ“ˆ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸:
- Request/Response times
- Error rates
- AI intent detection accuracy
- Database query performance
- User activity analytics

### Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:
- Winston Ğ´Ğ»Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸: error, warn, info, debug
- Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ»Ğ¾Ğ³Ğ¾Ğ²

## ğŸ”„ CI/CD Pipeline

1. **Development** â†’ Feature branches
2. **Testing** â†’ Automated tests (Jest, Cypress)
3. **Staging** â†’ Pre-production environment
4. **Production** â†’ Railway deployment

## ğŸ¯ Roadmap

### Ğ‘Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ¸Ğµ Ğ¿Ğ»Ğ°Ğ½Ñ‹:
1. âœ… Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‡ĞµÑ€ĞµĞ· AI
2. âœ… Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Vertex AI
3. ğŸ”„ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ²ÑĞµÑ… Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
4. ğŸ“… Batch Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
5. ğŸ“Š Advanced Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°

### Ğ”Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ñ†ĞµĞ»Ğ¸:
1. ğŸ¤– ML Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğ¹
2. ğŸ”Š Voice ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
3. ğŸ“± ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
4. ğŸŒ ĞœÑƒĞ»ÑŒÑ‚Ğ¸ÑĞ·Ñ‹Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ
5. ğŸ”— Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ğ¼Ğ¸